<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hd.ibus.mapper.IbusGatewayCustomMapper" >
  <resultMap id="BaseResultMap" type="com.hd.ibus.pojo.IbusGateway" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Oct 11 16:37:18 CST 2016.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="gateway_name" property="gatewayName" jdbcType="VARCHAR" />
    <result column="gateway_ip" property="gatewayIp" jdbcType="VARCHAR" />
    <result column="gateway_port" property="gatewayPort" jdbcType="INTEGER" />
    <result column="project_id" property="projectId" jdbcType="INTEGER" />
    <result column="is_online" property="isOnline" jdbcType="INTEGER" />
    <result column="group_count" property="groupCount" jdbcType="INTEGER" />
    <result column="node_count" property="nodeCount" jdbcType="INTEGER" />
    <result column="gateway_name2" property="gatewayName2" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Oct 11 16:37:18 CST 2016.
    -->
    id, gateway_name, gateway_ip, gateway_port, project_id, is_online, group_count, node_count, 
    gateway_name2
  </sql>
  <!-- 用户查询 -->
	<select id="findList" parameterType="IbusGatewayVo" resultMap="BaseResultMap">

		SELECT 
		<include refid="Base_Column_List" />
		from `ibus_gateway`
		

		<if test="pageBean!=null">
			limit ${pageBean.start},${pageBean.pageSize}
		</if>
	</select>
	
	<select id="findList2" parameterType="IbusGatewayVo" resultType="Map">

		select gate.id,gate.gateway_name,gate.gateway_ip,gate.gateway_port,project_name,gate.node_count from ibus_gateway gate ,ibus_project pro where gate.project_id=pro.id

		<if test="pageBean!=null">
			limit ${pageBean.start},${pageBean.pageSize}
		</if>
	</select>
	
	<update id="createTable" parameterType="map" statementType="STATEMENT" >
		CREATE TABLE ${tableName}  (
					   `id` bigint(15) NOT NULL AUTO_INCREMENT,
					   `tp1` float(11,1) DEFAULT NULL,
					   `tp2` float(11,1) DEFAULT NULL,
					   `tp3` float(11,1) DEFAULT NULL,
					   `tp4` float(11,1) DEFAULT NULL,
					   `tp5` float(11,1) DEFAULT NULL,
					   `tp6` float(11,1) DEFAULT NULL,
					   `tp7` float(11,1) DEFAULT NULL,
					   `tp8` float(11,1) DEFAULT NULL,
					   `tp9` float(11,1) DEFAULT NULL,
					   `va` float(11,2) DEFAULT NULL,
					   `vb` float(11,2) DEFAULT NULL,
					   `vc` float(11,2) DEFAULT NULL,
					   `ia` float(11,3) DEFAULT NULL,
					   `ib` float(11,3) DEFAULT NULL,
					   `ic` float(11,3) DEFAULT NULL,
					   `gateway_id` int(11) NOT NULL,
					   `node_id` int(11) NOT NULL,
					   `ac_time` datetime(3) NOT NULL,
					   PRIMARY KEY (`id`)
					   ) ENGINE=InnoDB AUTO_INCREMENT= ${auto_increment}  DEFAULT CHARSET=utf8
		
	</update>
	<update id="deleteTable" parameterType="map" statementType="STATEMENT" >
		DROP TABLE ${tableName}
	</update>
	<select id="findOneByGatewayPort" parameterType="int" resultMap="BaseResultMap">

		SELECT 
		<include refid="Base_Column_List" />
		from `ibus_gateway`
		where gateway_port=#{gatewayPort}
	</select>
	
	<!-- 查询列表的总记录数 -->
	<select id="findTotal" parameterType="IbusGatewayVo"
		resultType="int">
		
		select count(*) from `ibus_gateway`
		

	</select>
 
</mapper>